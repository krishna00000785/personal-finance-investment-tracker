# Finance Service Schema (pfit_finance_service)

## Tables

1. weekly_statements

``` sql
CREATE TABLE weekly_statements (
    id           uuid PRIMARY KEY,
    user_id      uuid NOT NULL,
    week_start   date NOT NULL,
    week_end     date NOT NULL,
    total_income numeric(14,2) NOT NULL,
    total_expense numeric(14,2) NOT NULL,
    net_savings  numeric(14,2) NOT NULL,
    summary_json jsonb NOT NULL, -- detailed breakdown (categories, top spends etc.)
    created_at   timestamptz NOT NULL DEFAULT now(),
    UNIQUE (user_id, week_start, week_end)
);

CREATE INDEX idx_weekly_statements_user ON weekly_statements (user_id, week_start);
```